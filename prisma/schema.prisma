generator client {
  provider        = "prisma-client-js"
  // The correct binaryTarget for this environment to avoid SSL issues
  binaryTargets   = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Product {
  id          String       @id @default(cuid())
  name        String
  description String?
  workOrders  WorkOrder[]
}

model Order {
  id         String      @id @default(cuid())
  customer   String
  createdAt  DateTime    @default(now())
  status     String      // e.g., 'Fulfilled', 'Processing', 'Canceled'
  total      Float
  workOrders WorkOrder[]
}

model WorkOrder {
  id              String   @id @default(cuid())
  orderId         String
  order           Order    @relation(fields: [orderId], references: [id])
  
  productId       String
  product         Product  @relation(fields: [productId], references: [id])

  designId        String
  designPreview   String
  quantity        Int
  size            String
  status          String   // e.g., 'Needs Production', 'In Progress', 'Completed', 'Canceled'
  subcontract     Boolean  @default(false)
  createdAt       DateTime @default(now())
}
